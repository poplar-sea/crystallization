# 2. reflect 包
* Go语言中的反射是由 reflect 包提供支持的，它定义了两个重要的类型 Type 和 Value 任意接口值在反射中都可以理解为由 reflect.Type 和 reflect.Value 两部分组成，并且 reflect 包提供了 reflect.TypeOf 和 reflect.ValueOf 两个函数来获取任意对象的 Value 和 Type
## 2.1 反射的类型对象（reflect.Type）
* 在Go语言程序中，使用 reflect.TypeOf() 函数可以获得任意值的类型对象（reflect.Type），程序通过类型对象可以访问任意值的类型信息
```go
package main

import (
    "fmt"
    "reflect"
)

func main() {
    var a int // 1. 定义一个 int 类型的变量。
    typeOfA := reflect.TypeOf(a) //2. 通过 reflect.TypeOf() 取得变量 a 的类型对象 typeOfA，类型为 reflect.Type()。
    fmt.Println(typeOfA.Name(), typeOfA.Kind()) // 3. 通过 typeOfA 类型对象的成员函数，可以分别获取到 typeOfA 变量的类型名为 int，种类（Kind）为 int。
}
```
### 2.1.1  reflect.Type 的方法
| 方法 | 说明 |
| ---- | ----|
| Field(i int) StructField |	根据索引返回索引对应的结构体字段的信息，当值不是结构体或索引超界时发生宕机|
| NumField() int	| 返回结构体成员字段数量，当类型不是结构体或索引超界时发生宕机|
| FieldByName(name string) (StructField, bool) |	根据给定字符串返回字符串对应的结构体字段的信息，没有找到时 bool 返回 false，当类型不是结构体或索引超界时发生宕机|
| FieldByIndex(index []int) StructField	|多层成员访问时，根据 []int 提供的每个结构体的字段索引，返回字段的信息，没有找到时返回零值。当类型不是结构体或索引超界时发生宕机|
| FieldByNameFunc(match func(string) bool) (StructField,bool) |	根据匹配函数匹配需要的字段，当值不是结构体或索引超界时发生宕机|

### 2.1.2 StructField结构体
```go
type StructField struct {
    Name string          // 字段名
    PkgPath string       // 字段路径
    Type      Type       // 字段反射类型对象
    Tag       StructTag  // 字段的结构体标签
    Offset    uintptr    // 字段在结构体中的相对偏移
    Index     []int      // Type.FieldByIndex中的返回的索引值
    Anonymous bool       // 是否为匿名字段
}
```
### 2.1.3 StructTag方法
| 方法 | 说明 |
| ---- | ----|
|func (tag StructTag) Get(key string) string |根据 Tag 中的键获取对应的值，例如`key1:"value1" key2:"value2"`的 Tag 中，可以传入“key1”获得“value1”。|
|func (tag StructTag) Lookup(key string) (value string, ok bool)| 根据 Tag 中的键，查询值是否存在。|